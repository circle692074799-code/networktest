<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KAY KANG - Footwear Design</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
    body, html { height: 100%; }
    body { display: flex; flex-direction: column; }
    main { flex-grow: 1; min-height: 101vh; } 
    body.overflow-hidden { overflow: hidden; }
    .no-transition { transition: none !important; }

    footer::before {
        content: ''; 
        position: absolute; 
        bottom: 100%; 
        left: 0;
        right: 0;
        height: 40px; 
        background: linear-gradient(to top, white, transparent);
        pointer-events: none; 
    }
</style>
</head>
<body class="bg-white text-black font-sans">

    <header class="p-4 md:p-10 bg-white z-20">
        <nav class="flex justify-between items-center">
            <div class="flex items-center gap-3 z-50">
                <a href="#" id="home-link" class="text-lg font-bold tracking-wider">
                    <span>KAY KANG</span>
                </a>
                <a href="resume.pdf" target="_blank" class="group">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-gray-400 group-hover:text-black transition-colors" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                    </svg>
                </a>
            </div>

            <div id="menu-btn" class="md:hidden z-50 cursor-pointer space-y-1.5">
                <span class="block w-6 h-0.5 bg-black transition-transform duration-300"></span>
                <span class="block w-6 h-0.5 bg-black transition-opacity duration-300"></span>
                <span class="block w-6 h-0.5 bg-black transition-transform duration-300"></span>
            </div>

            <ul id="nav-links" class="hidden fixed inset-0 bg-white z-40 
                                     flex flex-col items-center justify-center text-lg space-y-4
                                     md:relative md:flex md:flex-row md:items-center md:space-y-0 md:space-x-10
                                     md:bg-transparent md:inset-auto md:z-auto md:text-sm">
                <li class="relative w-full text-center md:w-auto">
                    <div class="dropdown-toggle flex items-center justify-center cursor-pointer py-2 md:pb-2" data-category="collab">
                        <span data-lang-key="collab">COLLAB</span><span class="symbol ml-1 font-light w-3 text-center">+</span>
                    </div>
                    <ul class="dropdown-menu hidden md:absolute w-full md:w-48 py-2 md:py-0 space-y-2 text-center
                               md:opacity-0 md:scale-95 md:pointer-events-none md:transition-all md:ease-out md:duration-200
                               md:top-full md:left-1/2 md:-translate-x-1/2">
                        <li><a href="#" class="project-link block py-1 hover:opacity-60" data-project="puma-rose" data-lang-key="puma-rose">PUMA ROSÉ</a></li>
                    </ul>
                </li>
                 <li class="relative w-full text-center md:w-auto">
                    <div class="dropdown-toggle flex items-center justify-center cursor-pointer py-2 md:pb-2" data-category="footwear">
                        <span data-lang-key="footwear">FOOTWEAR</span><span class="symbol ml-1 font-light w-3 text-center">+</span>
                    </div>
                    <ul class="dropdown-menu hidden md:absolute w-full md:w-60 py-2 md:py-0 space-y-2 text-center
                               md:opacity-0 md:scale-95 md:pointer-events-none md:transition-all md:ease-out md:duration-200
                               md:top-full md:left-1/2 md:-translate-x-1/2">
                        <li><a href="#" class="project-link block py-1 hover:opacity-60" data-project="pulsar-lite" data-lang-key="pulsar-lite">Pulsar Lite TN</a></li>
                        <li><a href="#" class="block py-1 hover:opacity-60" data-filter="pulsar-wedge" data-lang-key="pulsar-wedge">Pulsar Wedge Sandal NU (WIP)</a></li>
                        <li><a href="#" class="block py-1 hover:opacity-60" data-filter="rs-sandel" data-lang-key="rs-sandel">RS-Sandel-CNNU (WIP)</a></li>
                    </ul>
                </li>
                 <li class="relative w-full text-center md:w-auto">
                     <div class="dropdown-toggle flex items-center justify-center cursor-pointer py-2 md:pb-2" data-category="cmf">
                        <span data-lang-key="cmf">CMF</span><span class="symbol ml-1 font-light w-3 text-center">+</span>
                    </div>
                    <ul class="dropdown-menu hidden md:absolute w-full md:w-64 py-2 md:py-0 space-y-2 text-center
                               md:opacity-0 md:scale-95 md:pointer-events-none md:transition-all md:ease-out md:duration-200
                               md:top-full md:left-1/2 md:-translate-x-1/2">
                        <li><a href="#" class="project-link block py-1 hover:opacity-60" data-project="cny-loong" data-lang-key="cny-loong">24' CNY-Year of The Loong</a></li>
                        <li><a href="#" class="block py-1 hover:opacity-60" data-filter="dream-pack" data-lang-key="dream-pack">Dream Pack (WIP)</a></li>
                    </ul>
                </li>
                 <li class="relative w-full text-center md:w-auto">
                    <div class="dropdown-toggle flex items-center justify-center cursor-pointer py-2 md:pb-2" data-category="kids">
                        <span data-lang-key="kids">KIDS</span><span class="symbol ml-1 font-light w-3 text-center">+</span>
                    </div>
                    <ul class="dropdown-menu hidden md:absolute w-full md:w-64 py-2 md:py-0 space-y-2 text-center
                               md:opacity-0 md:scale-95 md:pointer-events-none md:transition-all md:ease-out md:duration-200
                               md:top-full md:left-1/2 md:-translate-x-1/2">
                        <li><a href="#" class="project-link block py-1 hover:opacity-60" data-project="fun-racer" data-lang-key="fun-racer">Fun Racer Trial Sandal TN</a></li>
                        <li><a href="#" class="block py-1 hover:opacity-60" data-filter="evolve-sandal" data-lang-key="evolve-sandal">Evolve Sandal OTNU (WIP)</a></li>
                        <li><a href="#" class="block py-1 hover:opacity-60" data-filter="excursion-utl" data-lang-key="excursion-utl">Excursion UTL WTR NU (WIP)</a></li>
                        <li><a href="#" class="block py-1 hover:opacity-60" data-filter="evolve-run" data-lang-key="evolve-run">Evolve Run Slip-on NU (WIP)</a></li>
                        <li><a href="#" class="block py-1 hover:opacity-60" data-filter="pounce-lite" data-lang-key="pounce-lite">Pounce Lite Sand ND (WIP)</a></li>
                    </ul>
                </li>
                 <li class="relative w-full text-center md:w-auto">
                    <div class="dropdown-toggle flex items-center justify-center cursor-pointer py-2 md:pb-2" data-category="lab">
                        <span data-lang-key="lab">LAB</span><span class="symbol ml-1 font-light w-3 text-center">+</span>
                    </div>
                    <ul class="dropdown-menu hidden md:absolute w-full md:w-64 py-2 md:py-0 space-y-2 text-center
                               md:opacity-0 md:scale-95 md:pointer-events-none md:transition-all md:ease-out md:duration-200
                               md:top-full md:left-1/2 md:-translate-x-1/2">
                        <li><a href="#" class="block py-1 hover:opacity-60" data-filter="material-force" data-lang-key="material-force">Material Force: Body Installation</a></li>
                    </ul>
                </li>
                <li class="relative w-full text-center md:w-auto">
                    <div class="dropdown-toggle flex items-center justify-center cursor-pointer py-2 md:pb-2">
                        <span id="lang-display" data-lang-key="english">English</span>
                        <svg class="w-4 h-4 ml-1 lang-chevron transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </div>
                    <ul class="dropdown-menu hidden md:absolute w-full md:w-40 py-2 md:py-0 space-y-2 text-center
                               md:opacity-0 md:scale-95 md:pointer-events-none md:transition-all md:ease-out md:duration-200
                               md:top-full md:left-1/2 md:-translate-x-1/2">
                        <li><a href="#" class="block py-1 hover:opacity-60" data-lang="en">English</a></li>
                        <li><a href="#" class="block py-1 hover:opacity-60" data-lang="zh">中文 (Chinese)</a></li>
                    </ul>
                </li>
            </ul>
        </nav>
    </header>

    <main class="p-4 md:p-10 pb-24">
        <div id="homepage-carousel" class="relative w-full md:w-[70%] mx-auto aspect-video overflow-hidden">
            <div id="slides-wrapper" class="flex h-full">
                <div class="slide w-full h-full flex-shrink-0 cursor-pointer" data-project="puma-rose">
                    <img src="images/home-1.jpg" class="w-full h-full object-cover" alt="Project PUMA ROSÉ">
                </div>
                <div class="slide w-full h-full flex-shrink-0 cursor-pointer" data-project="pulsar-lite">
                    <img src="images/home-2.jpg" class="w-full h-full object-cover" alt="Project Pulsar Lite">
                </div>
                <div class="slide w-full h-full flex-shrink-0 cursor-pointer" data-project="cny-loong">
                    <img src="images/home-3.jpg" class="w-full h-full object-cover" alt="Project Year of The Loong">
                </div>
                <div class="slide w-full h-full flex-shrink-0 cursor-pointer" data-project="fun-racer">
                    <img src="images/home-4.jpg" class="w-full h-full object-cover" alt="Project Fun Racer">
                </div>
                </div>

            <button id="prev-btn" class="absolute top-1/2 left-4 -translate-y-1/2 p-1 text-white hover:scale-150 transition-all duration-200">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg>
            </button>
            <button id="next-btn" class="absolute top-1/2 right-4 -translate-y-1/2 p-1 text-white hover:scale-150 transition-all duration-200">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg>
            </button>
        </div>

        <div id="project-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10 hidden">
        </div>
    </main>

    <footer id="scroll-footer" class="fixed bottom-0 left-0 w-full bg-white px-4 pt-3 pb-5 md:px-10 md:pt-8 md:pb-12 flex flex-col md:flex-row justify-between md:items-center text-center md:text-left gap-4 md:gap-0 z-10
                             opacity-0 translate-y-full transition-all duration-500 ease-in-out">
        <div>
            <p class="font-bold text-sm" data-lang-key="footwear-design">Footwear Design</p>
        </div>
        <div>
            <ul class="flex justify-center md:justify-end space-x-6 md:space-x-8 text-sm">
                <li><a href="mailto:kaykangxy@gmail.com" class="hover:underline" data-lang-key="email">Email</a></li>
                <li><a href="https://www.linkedin.com/in/kay-kang-13a395300" target="_blank" rel="noopener noreferrer" class="hover:underline" data-lang-key="linkedin">LinkedIn</a></li>
                <li><a href="https://www.instagram.com/_ouo_kay?igsh=MWFxaTV3a2lhbXp5Mw%3D%3D&utm_source=qr" target="_blank" rel="noopener noreferrer" class="hover:underline" data-lang-key="instagram">Instagram</a></li>
                <li><a href="https://xhslink.com/m/6wmS3XpepDb" target="_blank" rel="noopener noreferrer" class="hover:underline" data-lang-key="rednote">RedNote</a></li>
            </ul>
        </div>
    </footer>
    
    <div id="project-slideshow" class="hidden fixed inset-0 bg-black/95 z-50 text-white">
        <button id="close-slideshow" class="absolute top-6 left-8 text-sm flex items-center gap-2 hover:opacity-60 transition-opacity z-10">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" /></svg>
            <span data-lang-key="back">Back</span>
        </button>
        <div class="relative w-full h-full flex items-center justify-center">
            <div id="slideshow-container" class="relative w-full h-full overflow-hidden">
                <div id="slideshow-wrapper" class="flex h-full transition-transform duration-300 ease-in-out"></div>
            </div>
            <button id="slideshow-prev" class="absolute top-1/2 left-8 -translate-y-1/2 p-1 text-white/50 hover:text-white hover:scale-110 transition-all duration-200">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg>
            </button>
            <button id="slideshow-next" class="absolute top-1/2 right-8 -translate-y-1/2 p-1 text-white/50 hover:text-white hover:scale-110 transition-all duration-200">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg>
            </button>
            <div id="slideshow-counter" class="absolute bottom-6 text-sm text-white/80"></div>
        </div>
    </div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    
    // --- Data ---
    const projectImages = {
        'puma-rose': ['images/rose-1.jpg', 'images/rose-2.jpg', 'images/rose-3.jpg', 'images/rose-4.jpg', 'images/rose-5.jpg', 'images/rose-6.jpg', 'images/rose-7.jpg'],
        'pulsar-lite': ['images/pulsar-1.jpg', 'images/pulsar-2.jpg', 'images/pulsar-3.jpg', 'images/pulsar-4.jpg', 'images/pulsar-5.jpg', 'images/pulsar-6.jpg', 'images/pulsar-7.jpg', 'images/pulsar-8.jpg'],
        'cny-loong': ['images/cny-1.jpg', 'images/cny-2.jpg', 'images/cny-3.jpg', 'images/cny-4.jpg', 'images/cny-5.jpg', 'images/cny-6.jpg', 'images/cny-7.jpg', 'images/cny-8.jpg'],
        'fun-racer': ['images/fun-1.jpg', 'images/fun-2.jpg', 'images/fun-3.jpg', 'images/fun-4.jpg', 'images/fun-5.jpg', 'images/fun-6.jpg']
    };
    const translations = {
        'collab': { en: 'COLLAB', zh: '合作项目' }, 'footwear': { en: 'FOOTWEAR', zh: '鞋类设计' },
        'cmf': { en: 'CMF', zh: '色彩材质' }, 'kids': { en: 'KIDS', zh: '儿童' },
        'lab': { en: 'LAB', zh: '实验项目' }, 'english': { en: 'English', zh: '语言' },
        'footwear-design': { en: 'Footwear Design', zh: '鞋履设计' }, 'email': { en: 'Email', zh: '邮箱' },
        'linkedin': { en: 'LinkedIn', zh: '领英' }, 'instagram': { en: 'Instagram', zh: '照片墙' },
        'rednote': { en: 'RedNote', zh: '小红书' }, 'puma-rose': { en: 'PUMA ROSÉ', zh: 'PUMA ROSÉ' },
        'pulsar-lite': { en: 'Pulsar Lite TN', zh: 'Pulsar Lite TN' },
        'pulsar-wedge': { en: 'Pulsar Wedge Sandal NU (WIP)', zh: 'Pulsar Wedge 坡跟凉鞋 (开发中)' },
        'rs-sandel': { en: 'RS-Sandel-CNNU (WIP)', zh: 'RS-Sandel-CNNU (开发中)' },
        'cny-loong': { en: "24' CNY-Year of The Loong", zh: '24龙年限定' },
        'dream-pack': { en: 'Dream Pack (WIP)', zh: '梦境系列 (开发中)' },
        'fun-racer': { en: 'Fun Racer Trial Sandal TN', zh: 'Fun Racer 越野凉鞋' },
        'material-force': { en: 'Material Force: Body Installation', zh: '材料之力：身体装置' },
        'evolve-sandal': { en: 'Evolve Sandal OTNU (WIP)', zh: 'Evolve 凉鞋 OTNU (开发中)' },
        'excursion-utl': { en: 'Excursion UTL WTR NU (WIP)', zh: 'Excursion UTL WTR NU (开发中)' },
        'evolve-run': { en: 'Evolve Run Slip-on NU (WIP)', zh: 'Evolve Run 一脚蹬 NU (开发中)' },
        'pounce-lite': { en: 'Pounce Lite Sand ND (WIP)', zh: 'Pounce Lite 凉鞋 ND (开发中)' },
        'back': { en: 'Back', zh: '返回' },
    };

    // --- Element Selectors ---
    const footer = document.getElementById('scroll-footer');
    const homepageCarousel = document.getElementById('homepage-carousel');
    const projectGrid = document.getElementById('project-grid');
    const homeLink = document.getElementById('home-link');
    const slideshow = document.getElementById('project-slideshow');
    const menuBtn = document.getElementById('menu-btn');
    const navLinks = document.getElementById('nav-links');

    // --- Footer ---
    if (footer) {
        window.addEventListener('scroll', () => {
            if (window.scrollY > 1) { footer.classList.remove('opacity-0', 'translate-y-full'); } 
            else { footer.classList.add('opacity-0', 'translate-y-full'); }
        });
    }

    // --- Homepage Carousel ---
    if (homepageCarousel) {
        const slidesWrapper = document.getElementById('slides-wrapper');
        const nextBtn = document.getElementById('next-btn');
        const prevBtn = document.getElementById('prev-btn');
        let slides = Array.from(slidesWrapper.children);
        let currentIndex = 1;
        let autoplayInterval = null;
        let isTransitioning = false;

        // ▼▼▼ KEY CHANGE HERE ▼▼▼
        // Event Delegation for slide clicks
        slidesWrapper.addEventListener('click', (e) => {
            const slide = e.target.closest('.slide');
            if (slide && slide.dataset.project) {
                openSlideshow(slide.dataset.project);
            }
        });
        // ▲▲▲ KEY CHANGE HERE ▲▲▲

        const firstClone = slides[0].cloneNode(true);
        const lastClone = slides[slides.length - 1].cloneNode(true);
        slidesWrapper.appendChild(firstClone);
        slidesWrapper.insertBefore(lastClone, slides[0]);
        slides = Array.from(slidesWrapper.children); 

        const updateSliderPosition = (withTransition = true) => {
            if (!withTransition) slidesWrapper.classList.add('no-transition');
            slidesWrapper.style.transform = `translateX(-${currentIndex * 100}%)`;
            if (!withTransition) {
                slidesWrapper.offsetHeight; 
                slidesWrapper.classList.remove('no-transition');
            }
        };

        slidesWrapper.addEventListener('transitionend', () => {
            isTransitioning = false;
            if (currentIndex === 0) {
                currentIndex = slides.length - 2;
                updateSliderPosition(false);
            }
            if (currentIndex === slides.length - 1) {
                currentIndex = 1;
                updateSliderPosition(false);
            }
        });

        const changeSlide = (direction) => {
            if (isTransitioning) return;
            isTransitioning = true;
            currentIndex += direction;
            slidesWrapper.style.transition = 'transform 0.5s ease-in-out';
            updateSliderPosition();
        };

        const startAutoplay = () => {
            if (autoplayInterval) clearInterval(autoplayInterval);
            autoplayInterval = setInterval(() => changeSlide(1), 2000);
        };

        const stopAutoplay = () => clearInterval(autoplayInterval);

        nextBtn.addEventListener('click', () => changeSlide(1));
        prevBtn.addEventListener('click', () => changeSlide(-1));
        homepageCarousel.addEventListener('mouseenter', stopAutoplay);
        homepageCarousel.addEventListener('mouseleave', startAutoplay);
        
        setTimeout(() => { updateSliderPosition(false); startAutoplay(); }, 100);
    }

    // --- Mobile Menu ---
    if (menuBtn && navLinks) {
        const menuBtnSpans = menuBtn.querySelectorAll('span');
        const toggleMenu = () => {
            const isOpening = navLinks.classList.contains('hidden');
            navLinks.classList.toggle('hidden');
            document.body.classList.toggle('overflow-hidden');
            menuBtnSpans[0].classList.toggle('rotate-45', isOpening);
            menuBtnSpans[0].classList.toggle('translate-y-2', isOpening);
            menuBtnSpans[1].classList.toggle('opacity-0', isOpening);
            menuBtnSpans[2].classList.toggle('-rotate-45', isOpening);
            menuBtnSpans[2].classList.toggle('-translate-y-2', isOpening);
        };
        menuBtn.addEventListener('click', toggleMenu);
    }
    
    // --- Dropdown Menu Logic (Desktop Hover & Mobile Accordion) ---
    document.querySelectorAll('li.relative').forEach(parentLi => {
        const toggle = parentLi.querySelector('.dropdown-toggle');
        const menu = parentLi.querySelector('.dropdown-menu');
        if (!toggle || !menu) return;

        const symbol = toggle.querySelector('.symbol');
        const chevron = toggle.querySelector('.lang-chevron');

        toggle.addEventListener('click', (e) => {
            if (window.innerWidth < 768) { 
                e.stopPropagation();
                const wasOpen = !menu.classList.contains('hidden');
                parentLi.parentElement.querySelectorAll('.dropdown-menu').forEach(m => {
                    if (m !== menu) {
                        m.classList.add('hidden');
                        const s = m.previousElementSibling.querySelector('.symbol');
                        if (s) s.textContent = '+';
                    }
                });
                menu.classList.toggle('hidden');
                if (symbol) symbol.textContent = wasOpen ? '+' : '–';
            }
        });

        parentLi.addEventListener('mouseenter', () => {
            if (window.innerWidth >= 768) {
                menu.classList.remove('hidden');
                setTimeout(() => {
                    menu.classList.remove('md:opacity-0', 'md:scale-95');
                }, 10);
                menu.classList.remove('md:pointer-events-none');
                if (symbol) symbol.textContent = '–';
                if (chevron) chevron.classList.add('rotate-180');
            }
        });

        parentLi.addEventListener('mouseleave', () => {
            if (window.innerWidth >= 768) {
                menu.classList.add('md:opacity-0', 'md:scale-95');
                menu.classList.add('md:pointer-events-none');
                setTimeout(() => {
                    menu.classList.add('hidden');
                }, 200);
                if (symbol) symbol.textContent = '+';
                if (chevron) chevron.classList.remove('rotate-180');
            }
        });
    });
    
    // --- General Link Click Handler (Event Delegation) ---
    if (navLinks) {
        navLinks.addEventListener('click', (e) => {
            const targetLink = e.target.closest('a');
            if (!targetLink) return;

            e.preventDefault();

            const isDropdownToggle = e.target.closest('.dropdown-toggle');
            
            // Handle Language Switch
            if (targetLink.dataset.lang) {
                setLanguage(targetLink.dataset.lang);
            }
            // Handle Project Link
            else if (targetLink.dataset.project) {
                openSlideshow(targetLink.dataset.project);
            }
            // Handle WIP/Filter Link (for future use)
            else if (targetLink.dataset.filter) {
                // Placeholder for filter logic
            }
            
            // Close mobile menu if a real link is clicked (not a toggle)
            if (window.innerWidth < 768 && !navLinks.classList.contains('hidden') && !isDropdownToggle) {
                menuBtn.click();
            }
        });
    }

    // --- Home Link ---
    if (homeLink) {
        homeLink.addEventListener('click', (e) => {
            e.preventDefault();
            if (projectGrid) projectGrid.classList.add('hidden');
            if (homepageCarousel) homepageCarousel.classList.remove('hidden');
        });
    }

    // --- Translation & Styling ---
    const styleWipItems = () => {
        document.querySelectorAll('.dropdown-menu a').forEach(link => {
            const key = link.dataset.langKey;
            const isWip = translations[key] && translations[key].en.includes('(WIP)');
            link.classList.toggle('text-gray-400', isWip);
            link.classList.toggle('pointer-events-none', isWip);
            link.classList.toggle('cursor-not-allowed', isWip);
            link.classList.remove('line-through');
        });
    };

    const updateActiveLanguage = (lang) => {
        document.querySelectorAll('[data-lang]').forEach(link => {
            link.classList.toggle('text-gray-400', link.dataset.lang === lang);
            link.classList.toggle('pointer-events-none', link.dataset.lang === lang);
        });
    };

    const setLanguage = (lang) => {
        document.querySelectorAll('[data-lang-key]').forEach(el => {
            const key = el.dataset.langKey;
            if (translations[key] && translations[key][lang]) {
                el.textContent = translations[key][lang];
            }
        });
        localStorage.setItem('language', lang);
        styleWipItems();
        updateActiveLanguage(lang);
    };
    
    setLanguage(localStorage.getItem('language') || 'en');

    // --- Project Slideshow ---
    const slideshowWrapper = document.getElementById('slideshow-wrapper');
    const slideshowCounter = document.getElementById('slideshow-counter');
    const slideshowNextBtn = document.getElementById('slideshow-next');
    const slideshowPrevBtn = document.getElementById('slideshow-prev');
    const closeSlideshowBtn = document.getElementById('close-slideshow');
    let slideshowState = { currentIndex: 0, images: [] };
    
    function openSlideshow(projectName) {
        const images = projectImages[projectName];
        if (!images || images.length === 0) return;
        
        slideshowState = { currentIndex: 0, images: images };
        slideshowWrapper.innerHTML = '';
        images.forEach(imgSrc => {
            const slide = document.createElement('div');
            slide.className = 'slide w-full h-full flex-shrink-0 flex items-center justify-center';
            slide.innerHTML = `<img src="${imgSrc}" class="max-w-full max-h-full object-contain">`;
            slideshowWrapper.appendChild(slide);
        });
        
        slideshow.classList.remove('hidden');
        document.body.classList.add('overflow-hidden');
        goToProjectSlide(0);
    }

    function closeSlideshow() {
        slideshow.classList.add('hidden');
        document.body.classList.remove('overflow-hidden');
    }

    function goToProjectSlide(index) {
        slideshowWrapper.style.transform = `translateX(-${index * 100}%)`;
        slideshowState.currentIndex = index;
        slideshowCounter.textContent = `${index + 1} / ${slideshowState.images.length}`;
    };

    if (slideshow) {
        slideshowNextBtn.addEventListener('click', () => {
            const nextIndex = (slideshowState.currentIndex + 1) % slideshowState.images.length;
            goToProjectSlide(nextIndex);
        });
        slideshowPrevBtn.addEventListener('click', () => {
            const prevIndex = (slideshowState.currentIndex - 1 + slideshowState.images.length) % slideshowState.images.length;
            goToProjectSlide(prevIndex);
        });
        closeSlideshowBtn.addEventListener('click', closeSlideshow);
    }
});
</script>
</body>
</html>